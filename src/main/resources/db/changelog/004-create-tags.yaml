databaseChangeLog:
  - changeSet:
      id: tags-1
      author: mika
      changes:
        - createTable:
            tableName: tags
            columns:
              - column: { name: id, type: BIGSERIAL, constraints: { primaryKey: true } }
              - column: { name: name, type: VARCHAR(50), constraints: { nullable: false, unique: true } }
        - createTable:
            tableName: wardrobe_item_tags
            columns:
              - column: { name: item_id, type: BIGINT, constraints: { nullable: false, foreignKeyName: fk_wit_item, references: wardrobe_items(id), deleteCascade: true } }
              - column: { name: tag_id,  type: BIGINT, constraints: { nullable: false, foreignKeyName: fk_wit_tag,  references: tags(id), deleteCascade: true } }
              - column: { name: confidence, type: "NUMERIC(4,3)", defaultValueNumeric: 1.0, constraints: { nullable: false } }
        - addPrimaryKey:
            tableName: wardrobe_item_tags
            columnNames: item_id, tag_id
