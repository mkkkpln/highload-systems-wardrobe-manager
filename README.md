# Wardrobe Manager — пояснение к лабораторной работе

## Предметная область

Система Wardrobe Manager предназначена для ведения онлайн-гардероба и подбора образов.
Пользователь может:
- добавлять вещи в гардероб (например: куртка, платье, сумка),
- хранить информацию о характеристиках предметов (тип, бренд, цвет, сезон, фото),
- создавать готовые образы (outfits) из нескольких вещей,
- управлять своим гардеробом через REST API (CRUD-операции).
Таким образом, приложение моделирует повседневный сценарий использования: у каждого пользователя есть свой набор вещей, из которых он формирует комбинации для разных случаев.

## Задача

Реализация монолитного приложения Wardrobe Manager на Spring Boot.
Приложение позволяет пользователю вести свой онлайн-гардероб и подбирать готовые образы.

**Функционал**:

1. CRUD для пользователей – регистрация, редактирование, удаление.
2. CRUD для предметов гардероба – добавление, просмотр, редактирование, удаление.
3. CRUD для образов (outfits) – создание образов из нескольких вещей.
4. Поддержка связей:
   - Пользователь ↔ Предметы гардероба (One-to-Many).
   - Пользователь ↔ Образы (One-to-Many).
   - Образы ↔ Предметы гардероба (Many-to-Many через таблицу outfit_items с дополнительным полем role).
5. Валидация DTO и Entity.
6. Глобальный хендлинг ошибок.
7. Поддержка пагинации и ограничений (≤ 50 записей за запрос).

**Цель**: реализовать систему с чистой архитектурой (controller–service–repository–entity–dto–mapper), обеспечить правильные связи в БД и корректное REST API с валидацией.


## Архитектура базы данных

Схема БД состоит из четырёх основных таблиц:

<img width="764" height="344" alt="image" src="https://github.com/user-attachments/assets/73cdaa9c-ee82-4759-9f88-dff6a8f15b0a" />


## Структура проекта

```
src/main/java/com/example/highloadsystemswardrobemanager/

├── controller/                 # REST-контроллеры
│   ├── UserController.java
│   ├── WardrobeItemController.java
│   └── OutfitController.java
│
├── dto/                        # DTO-модели с валидацией
│   ├── UserDto.java
│   ├── WardrobeItemDto.java
│   └── OutfitDto.java
│
├── entity/                     # JPA-сущности
│   ├── User.java
│   ├── WardrobeItem.java
│   ├── Outfit.java
│   └── OutfitItem.java
│
├── exception/                  # Обработка ошибок
│   ├── GlobalExceptionHandler.java
│   └── NotFoundException.java
│
├── mapper/                     # MapStruct-мапперы
│   ├── UserMapper.java
│   ├── WardrobeItemMapper.java
│   └── OutfitMapper.java
│
├── repository/                 # Spring Data JPA репозитории
│   ├── UserRepository.java
│   ├── WardrobeItemRepository.java
│   └── OutfitRepository.java
│
├── service/                     # Бизнес-логика
│   ├── UserService.java
│   ├── WardrobeItemService.java
│   └── OutfitService.java
│
└── HighloadSystemsWardrobeManagerApplication.java  # Точка входа

```

## Алгоритм работы

1. Пользователь создаёт аккаунт.
2. Добавляет вещи в свой гардероб (тип, бренд, цвет, сезон, фото).
3. Создаёт образы: объединяет несколько вещей в Outfit, при необходимости задаёт роль каждой вещи (верх, обувь, аксессуар).
4. Просматривает списки пользователей, вещей, образов:
  - с пагинацией (с подсчётом общего числа элементов),
  - или в формате «бесконечной ленты» (scroll, без total count).
5. Редактирует и удаляет объекты.
6. При создании/обновлении Outfit используется транзакция (гарантия согласованности: либо добавятся все вещи, либо не добавится ни одна).

## Тестирование

### Запуск тестов производительности
```bash
mvn test 
```
